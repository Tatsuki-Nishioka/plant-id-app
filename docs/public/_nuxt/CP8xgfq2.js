import{n as $,p as k,c as p,a as e,q as z,t as l,o as r,_ as w,r as S,d as D,F as P,s as B,u as E,v as I,x as K,b as R,y as i,z as M}from"./Bq4S_Nqn.js";const V={class:"progress-bar-container"},J={class:"progress-bar"},O={class:"progress-info"},A=$({__name:"ProgressBar",props:{currentStep:{},totalSteps:{},filteredCount:{}},setup(m){const s=m,h=k(()=>Math.min(s.currentStep+1,s.totalSteps)),n=k(()=>s.currentStep/s.totalSteps*100);return(t,o)=>(r(),p("div",V,[e("div",J,[e("div",{class:"progress",style:z({width:n.value+"%"})},null,4)]),e("div",O,[e("span",null,"該当植物数: "+l(t.filteredCount),1),e("span",null,"ステップ: "+l(h.value)+" / "+l(t.totalSteps),1)])]))}}),T=w(A,[["__scopeId","data-v-3c1fc911"]]),j={class:"filter-panel"},L={class:"category-container"},U={class:"category"},W={class:"step-count"},Y={class:"question-container"},G={class:"question"},H={class:"options"},Q=["onClick"],X={class:"icon"},Z={class:"label"},ee=$({__name:"FilterPanel",props:{category:{},question:{},stepCount:{}},emits:["select","skip","show-results"],setup(m,{emit:s}){const h=m,n=s,t=S(null),o=[{label:"Yes",value:!0,icon:"✔️"},{label:"No",value:!1,icon:"❌"},{label:"Unknown",value:null,icon:"❔"}],u=v=>{t.value={key:h.question.key,value:v},n("select",t.value)},y=()=>{n("skip")},C=()=>{n("show-results")};return(v,q)=>(r(),p("div",j,[e("div",L,[e("h2",U,[D(l(v.category)+" ",1),e("span",W,"（"+l(v.stepCount)+" ステップ）",1)]),e("div",Y,[e("h3",G,l(v.question.text),1),e("div",H,[(r(),p(P,null,B(o,g=>{var b;return e("button",{key:g.label,class:E(["option-card",{selected:((b=t.value)==null?void 0:b.value)===g.value}]),onClick:F=>u(g.value)},[e("span",X,l(g.icon),1),e("span",Z,l(g.label),1)],10,Q)}),64))])]),e("button",{class:"skip-button",onClick:y},"カテゴリをすべてスキップ"),e("button",{class:"result-button",onClick:C},"結果を見る")])]))}}),te=w(ee,[["__scopeId","data-v-18a64347"]]),se={class:"result-card"},ae={class:"toggle-icon"},ne={key:0},oe={class:"character-key"},ce={class:"character-value"},le=$({__name:"ResultCard",props:{plant:{},characterSet:{}},setup(m){const s=S(!1),h=()=>{s.value=!s.value};return(n,t)=>(r(),p("div",se,[e("div",{class:"header",onClick:h},[e("h3",null,l(n.plant.scientificName),1),e("span",ae,l(s.value?"▲":"▼"),1)]),s.value?(r(),p("ul",ne,[(r(!0),p(P,null,B(n.plant.characters,o=>{var u;return r(),p("li",{key:o,class:"character-item"},[e("span",oe,l(o),1),e("span",ce,"："+l((u=n.characterSet[o])==null?void 0:u.characterJpn),1)])}),128))])):I("",!0)]))}}),re=w(le,[["__scopeId","data-v-181e1c06"]]),ue={key:1},ie=$({__name:"index",setup(m){const s=K();s.loadPlantData();const h=s.plants,n=s.characterSet,t=S(0),o=S(new Map),u=S([]),y=S(new Map);Object.entries(n.value).forEach(([a,d])=>{const c=d.categoryJpn,_={category:c,key:a,text:d.characterJpn},f=y.value.get(c)??[];f.push(_),y.value.set(c,f),u.value.push(_)});const C=k(()=>u.value[t.value].category),v=k(()=>{var a;return((a=y.value.get(C.value))==null?void 0:a.length)||0}),q=k(()=>{const a=[],d=[];return o.value.forEach((c,_)=>{c===!0?a.push(_):c===!1&&d.push(_)}),h.value.filter(c=>{const _=a.every(N=>c.characters.includes(N)),f=!d.some(N=>c.characters.includes(N));return _&&f})}),g=a=>{o.value.set(a.key,a.value),t.value++},b=()=>{var a;(a=y.value.get(C.value))==null||a.forEach(d=>{o.value.set(d.key,null)}),t.value=o.value.size},F=()=>{t.value=u.value.length},x=()=>{t.value=0,o.value=new Map};return(a,d)=>{var c,_;return r(),p("div",null,[R(T,{currentStep:i(t),totalSteps:(c=i(u))==null?void 0:c.length,filteredCount:i(q).length},null,8,["currentStep","totalSteps","filteredCount"]),i(t)<((_=i(u))==null?void 0:_.length)?(r(),M(te,{key:0,category:i(C),stepCount:i(v),question:i(u)[i(t)],onSelect:g,onSkip:b,onShowResults:F},null,8,["category","stepCount","question"])):(r(),p("div",ue,[e("div",{class:"results-header"},[d[0]||(d[0]=e("h2",null,"結果",-1)),e("button",{class:"reset-button",onClick:x},"もう一度検索する")]),(r(!0),p(P,null,B(i(q),f=>(r(),p("div",{key:f.scientificName},[R(re,{characterSet:i(n),plant:f},null,8,["characterSet","plant"])]))),128))]))])}}}),de=w(ie,[["__scopeId","data-v-2d7e63e8"]]);export{de as default};
